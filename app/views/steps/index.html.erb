<h1>Steps Data</h1>

<table border="1">
  <tr>
    <th>Rec date</th>
    <th>Steps</th>
    <th>Mod steps</th>
    <th>Mod minutes</th>
  </tr>

  <% @steps = @steps.sort_by { |step| step['rec_date'] }.reverse %>
  <% @steps.each do |step| %>
  <tr>
	  <td>
		  <%= link_to h(step.rec_date), step %>
	  </td>
    <td><%=h step.steps %></td>
    <td><%=h step.mod_steps %></td>
    <td><%=h step.mod_min %></td>
    <!-- <td><%= link_to 'Show', step %></td> -->
    <td><%= link_to 'Edit', edit_step_path(step) %></td>
    <td><%= link_to 'Destroy', step, :confirm => 'Are you sure?', :method => :delete %></td>
  </tr>
<% end %>
</table>

<br />
<%
  @sdata = []
  @mod_steps = []
  @dates = []

  @steps.each do |s|
    @sdata.push(s.steps)
    @mod_steps.push(s.mod_steps)
    @dates.push(s.rec_date)
  end

  @sdata = @sdata.reverse
  @mod_steps = @mod_steps.reverse
  @dates = @dates.reverse

%>
<%= link_to 'New step', new_step_path %>
<br /><br />
<%= Gchart.bar(
  :size => '1000x300',
  :axis_with_labels => 'x,y',
  :title => "example title",
  :bg => 'FFFFFF',
  :legend => ['moderate', 'total'],
  :bar_colors => 'FF0000,00FF00',
  :axis_labels => [@dates, [0,20000]],
  :stacked => false,
  :bar_width_and_spacing => [25,50],
  :max_value => 20000,
  :format => 'image_tag',
  :data => [@sdata, @mod_steps]) %>
<br /><br />
test <%= Gchart.line(:data => [0, 40, 10, 70, 20]) %>  /test

<script language="javascript">
  new Proto.Chart($('barchart'),
  [
  {data: d6, label: "Data 1"}
  ],
  {
    bars: {show: true},
    xaxis: {min: 0, max: 14, tickSize: 1},
  });
</script>
